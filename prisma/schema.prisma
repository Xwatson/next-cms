generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum UserStatus {
  ACTIVE
  INACTIVE
  LOCKED
}

model User {
  id            Int        @id @default(autoincrement()) @map("id")
  email         String     @unique @map("email")
  name          String?    @map("name")
  password      String     @map("password")
  avatar        String?    @map("avatar")
  phone         String?    @unique @map("phone")
  roleId        Int        @map("role_id")
  status        UserStatus @default(ACTIVE) @map("status")
  lastLoginTime DateTime?  @map("last_login_time")
  lastLoginIp   String?    @map("last_login_ip")
  createdAt     DateTime   @default(now()) @map("created_at")
  updatedAt     DateTime   @updatedAt @map("updated_at")
  role          Role       @relation(fields: [roleId], references: [id])

  @@index([email])
  @@index([phone])
  @@index([roleId])
  @@map("next_user")
}

model Role {
  id          Int      @id @default(autoincrement()) @map("id")
  name        String   @unique @map("name")
  code        String   @unique @map("code")
  description String?  @map("description") @db.Text
  remark      String?  @map("remark")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  users       User[]
  permissions Permission[] @relation("RolePermissions")

  @@index([code])
  @@map("next_role")
}

model Permission {
  id          Int      @id @default(autoincrement()) @map("id")
  name        String   @map("name")
  code        String   @unique @map("code")
  type        String   @map("type")
  description String?  @map("description") @db.Text
  roles       Role[]   @relation("RolePermissions")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("next_permissions")
}

model Category {
  id          Int       @id @default(autoincrement()) @map("id")
  name        String    @map("name")
  code        String    @unique @map("code")
  parentId    Int?      @map("parent_id")
  sort        Int       @default(0) @map("sort")
  description String?   @map("description") @db.Text
  seoTitle    String?   @map("seo_title") @db.Text
  seoKeywords String?   @map("seo_keywords") @db.Text
  seoDesc     String?   @map("seo_description") @db.Text
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")
  parent      Category? @relation("CategoryToCategory", fields: [parentId], references: [id])
  children    Category[] @relation("CategoryToCategory")
  videos      Video[]

  @@index([parentId])
  @@index([sort])
  @@map("next_category")
}

model Video {
  id            Int       @id @default(autoincrement()) @map("id")
  categoryId    Int       @map("category_id")
  typeId1       Int       @default(0) @map("type_id_1")
  groupId       Int       @default(0) @map("group_id")
  name          String    @default("") @map("name")
  subTitle      String    @default("") @map("sub")
  enName        String    @default("") @map("en")
  status        Int       @default(0) @map("status")
  letter        String    @default("") @map("letter") @db.Char(1)
  color         String    @default("") @map("color") @db.VarChar(6)
  tag           String    @default("") @map("tag")
  class         String    @default("") @map("class")
  pic           String    @default("") @map("pic")
  picThumb      String    @default("") @map("pic_thumb")
  picSlide      String    @default("") @map("pic_slide")
  picScreenshot String?   @map("pic_screenshot") @db.Text
  actor         String    @default("") @map("actor")
  director      String    @default("") @map("director")
  writer        String    @default("") @map("writer")
  behind        String    @default("") @map("behind")
  blurb         String    @default("") @map("blurb")
  remarks       String    @default("") @map("remarks")
  pubdate       String    @default("") @map("pubdate")
  total         Int       @default(0) @map("total")
  serial        String    @default("0") @map("serial")
  tv            String    @default("") @map("tv")
  weekday       String    @default("") @map("weekday")
  area          String    @default("") @map("area")
  lang          String    @default("") @map("lang")
  year          String    @default("") @map("year")
  version       String    @default("") @map("version")
  state         String    @default("") @map("state")
  author        String    @default("") @map("author")
  jumpUrl       String    @default("") @map("jumpurl")
  tpl           String    @default("") @map("tpl")
  tplPlay       String    @default("") @map("tpl_play")
  tplDown       String    @default("") @map("tpl_down")
  isend         Int       @default(0) @map("isend")
  lock          Int       @default(0) @map("lock")
  level         Int       @default(0) @map("level")
  copyright     Int       @default(0) @map("copyright")
  points        Int       @default(0) @map("points")
  pointsPlay    Int       @default(0) @map("points_play")
  pointsDown    Int       @default(0) @map("points_down")
  hits          Int       @default(0) @map("hits")
  hitsDay       Int       @default(0) @map("hits_day")
  hitsWeek      Int       @default(0) @map("hits_week")
  hitsMonth     Int       @default(0) @map("hits_month")
  duration      String    @default("") @map("duration")
  up            Int       @default(0) @map("up")
  down          Int       @default(0) @map("down")
  score         Decimal   @default(0) @map("score") @db.Decimal(3,1)
  scoreAll      Int       @default(0) @map("score_all")
  scoreNum      Int       @default(0) @map("score_num")
  time          Int       @default(0) @map("time")
  timeAdd       Int       @default(0) @map("time_add")
  timeHits      Int       @default(0) @map("time_hits")
  timeMake      Int       @default(0) @map("time_make")
  trysee        Int       @default(0) @map("trysee")
  doubanId      Int       @default(0) @map("douban_id")
  doubanScore   Decimal   @default(0) @map("douban_score") @db.Decimal(3,1)
  reurl         String    @default("") @map("reurl")
  relVod        String    @default("") @map("rel_vod")
  relArt        String    @default("") @map("rel_art")
  pwd           String    @default("") @map("pwd")
  pwdUrl        String    @default("") @map("pwd_url")
  pwdPlay       String    @default("") @map("pwd_play")
  pwdPlayUrl    String    @default("") @map("pwd_play_url")
  pwdDown       String    @default("") @map("pwd_down")
  pwdDownUrl    String    @default("") @map("pwd_down_url")
  content       String    @map("content") @db.Text
  playFrom      String    @default("") @map("play_from")
  playServer    String    @default("") @map("play_server")
  playNote      String    @default("") @map("play_note")
  playUrl       String    @map("play_url") @db.MediumText
  downFrom      String    @default("") @map("down_from")
  downServer    String    @default("") @map("down_server")
  downNote      String    @default("") @map("down_note")
  downUrl       String    @map("down_url") @db.MediumText
  plot          Int       @default(0) @map("plot")
  plotName      String    @map("plot_name") @db.MediumText
  plotDetail    String    @map("plot_detail") @db.MediumText
  category      Category  @relation(fields: [categoryId], references: [id])

  @@map("next_video")
  @@index([categoryId])
  @@index([typeId1])
  @@index([level])
  @@index([hits])
  @@index([letter])
  @@index([name])
  @@index([year])
  @@index([area])
  @@index([lang])
  @@index([tag])
  @@index([class])
  @@index([lock])
  @@index([up])
  @@index([down])
  @@index([enName])
  @@index([hitsDay])
  @@index([hitsWeek])
  @@index([hitsMonth])
  @@index([plot])
  @@index([pointsPlay])
  @@index([pointsDown])
  @@index([groupId])
  @@index([timeAdd])
  @@index([time])
  @@index([timeMake])
  @@index([actor])
  @@index([director])
  @@index([scoreAll])
  @@index([scoreNum])
  @@index([total])
  @@index([score])
  @@index([version])
  @@index([state])
  @@index([isend])
}
